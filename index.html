<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>Nominatsiyalar Aylanishi ðŸŽ‰</title>

<style>
body{
  margin:0;
  padding:0;
  background:#0f172a;
  color:white;
  font-family:Arial,sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100vh;
  overflow:hidden;
}

#ticker-container{
  width:600px;
  height:60px;
  overflow:hidden;
  border:4px solid white;
  border-radius:12px;
  background:#1e293b;
  position:relative;
  z-index:2;
}

#ticker{
  display:flex;
  position:absolute;
  white-space:nowrap;
  will-change:transform;
}

.ticker-item{
  flex:0 0 auto;
  width:150px;
  margin:0 10px;
  text-align:center;
  line-height:60px;
  font-weight:bold;
  font-size:18px;
  border-radius:8px;
  color:white;
}

#controls{
  margin-top:20px;
  z-index:2;
}

button{
  padding:10px 18px;
  margin:5px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}

#result{
  margin-top:25px;
  display:none;
  text-align:center;
  z-index:2;
  animation:pop 0.8s ease forwards;
}

#result img{
  width:260px;
  border-radius:16px;
  border:4px solid white;
  animation:zoom 0.8s ease forwards;
}

@keyframes pop{
  0%{transform:scale(0) rotate(-180deg);opacity:0}
  100%{transform:scale(1) rotate(0);opacity:1}
}

@keyframes zoom{
  0%{transform:scale(0.5);opacity:0}
  100%{transform:scale(1);opacity:1}
}

#confetti-container{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
  overflow:hidden;
  z-index:1;
}

.confetti{
  position:absolute;
  border-radius:50%;
  opacity:0.9;
}
</style>
</head>

<body>

<div id="ticker-container">
  <div id="ticker"></div>
</div>

<div id="controls">
  <button onclick="startTicker()">Run</button>
  <button onclick="stopTicker()">Stop</button>
  <button onclick="openResult()">Open</button>
</div>

<div id="result">
  <h2 id="winnerText"></h2>
  <img id="winnerImg" />
</div>

<div id="confetti-container"></div>

<script>
// ================== MA'LUMOTLAR ==================
const nominations=[
 {name:"EÅ„ uyqÄ±shÄ±", img:"uyqishi.jpg"},
 {name:"EÅ„ ashÄ±wshaq", img:"ashiwshaq.jpg"},
 {name:"EÅ„ tÄ±rjÄ±q", img:"sirli.jpg"},
 {name:"EÅ„ shox", img:"shox.jpg"},
 {name:"EÅ„ biyparwa", img:"biyparwa.jpg"},
 {name:"Eng qÄ±yalparaz", img:"qiyalparaz.jpg"},
 {name:"EÅ„ romantik", img:"romantik.jpg"},
 {name:"EÅ„ sÄ±qmar", img:"siqmar.jpg"},
 {name:"EÅ„ bÄ±jÄ±q", img:"sÃ²ylemshek.jpg"},
 {name:"EÅ„ erinshek", img:"erinshek.jpg"},
 {name:"EÅ„ Ã³kpeshil", img:"okpeshil.jpg"}
];

const colors=[
 "#ef4444","#f97316","#facc15","#22c55e","#06b6d4",
 "#3b82f6","#6366f1","#8b5cf6","#ec4899","#14b8a6"
];

// ================== TICKER ==================
const ticker=document.getElementById("ticker");
let pos=0;
let speed=6;
let tickerInterval=null;
let selected=null;

// Nominalarni chiqarish + duplicate
function initTicker(){
  nominations.forEach((n,i)=>{
    const d=document.createElement("div");
    d.className="ticker-item";
    d.textContent=n.name;
    d.style.background=colors[i%colors.length];
    ticker.appendChild(d);
  });

  nominations.forEach((n,i)=>{
    const d=document.createElement("div");
    d.className="ticker-item";
    d.textContent=n.name;
    d.style.background=colors[i%colors.length];
    ticker.appendChild(d);
  });
}
initTicker();

// ================== RUN ==================
function startTicker(){
  document.getElementById("result").style.display="none";
  if(tickerInterval) clearInterval(tickerInterval);

  tickerInterval=setInterval(()=>{
    pos-=speed;
    if(pos<-ticker.scrollWidth/2) pos=0;
    ticker.style.transform=`translateX(${pos}px)`;
  },16);
}

// ================== STOP ==================
function stopTicker(){
  clearInterval(tickerInterval);

  const containerWidth=document.getElementById("ticker-container").offsetWidth;
  const center=Math.abs(pos)+containerWidth/2;
  const index=Math.floor(center/170)%nominations.length;

  selected=nominations[index];

  pos=-index*170 + containerWidth/2 - 85;
  ticker.style.transform=`translateX(${pos}px)`;
}

// ================== OPEN (MUAMMO HAL QILINGAN) ==================
function openResult(){
  if(!selected){
    alert("Avval Stop bosing!");
    return;
  }

  const result=document.getElementById("result");
  const img=document.getElementById("winnerImg");

  result.style.display="none";
  img.src="";

  document.getElementById("winnerText").innerText=selected.name;

  img.onload=()=>{
    result.style.display="block";
    spawnConfetti();
    playDrum();
  };

  img.src=selected.img;
}

// ================== CONFETTI ==================
function spawnConfetti(){
  const box=document.getElementById("confetti-container");

  for(let i=0;i<120;i++){
    const c=document.createElement("div");
    c.className="confetti";
    const size=5+Math.random()*8;

    c.style.width=size+"px";
    c.style.height=size+"px";
    c.style.left=Math.random()*box.offsetWidth+"px";
    c.style.top="-20px";
    c.style.background=colors[Math.floor(Math.random()*colors.length)];

    box.appendChild(c);

    const dur=2+Math.random()*2;
    setTimeout(()=>{
      c.style.transition=`transform ${dur}s linear, opacity ${dur}s linear`;
      c.style.transform=`translate(${(Math.random()-0.5)*box.offsetWidth}px, ${box.offsetHeight+100}px) rotate(${Math.random()*720}deg)`;
      c.style.opacity=0;
    },50);

    setTimeout(()=>c.remove(),dur*1000);
  }
}

// ================== AUDIO ==================
function playDrum(){
  const audio=new Audio("audio/drum.mp3");
  audio.play().catch(()=>{});
}
</script>

</body>
</html>
